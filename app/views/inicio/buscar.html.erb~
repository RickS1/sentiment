<script src="https://d3js.org/d3.v4.min.js"></script>
<%= include_gon  %>
<script type="text/javascript">

//Cargamos los datos
d3.csv('http://200.12.162.229:81/usr_stats_Ayotzinapa.csv',function(data){
	data.forEach(function(d){d['followers'] = +d['followers']; d['following'] = +d['following'];});

	var width = 800;
	var height = 800;
	var margen = 50;

	var svg = d3.select("body").append("svg")
						.attr("width", width)
						.attr("height", height);

  var x = d3.scaleLinear()
					.domain(d3.extent(data, function(d){return d['followers']}))
					.range([margen, width - margen]);

	var y = d3.scaleLinear()
					.domain(d3.extent(data, function(d){return d['following']}))
					.range([height - margen, margen]);

	var ejeX = d3.axisBottom(x)
							.ticks(8);

	var ejeY = d3.axisLeft(y)
							.ticks(8);

	var r = 3;

	svg.append("g")
			.attr("class", "eje-x")
			.attr("transform", "translate(0," + (height- margen) + ")")
			.call(ejeX)
			.append("text")
				.attr("class", "label")
				.attr("x", width - margen)
				.attr("y", margen - 15)
				.attr("text-anchor", "end")
				.text("Seguidores");

	svg.append("g")
			.attr("class", "eje-y")
			.attr("transform", "translate(" + margen + ", 0)")
			.call(ejeY)			
			.append("text")
				.attr("class", "label")
				.attr("x", margen)
				.attr("y", height - margen)
				.attr("text-anchor", "middle")
				.text("Siguiendo");

	var points = svg.selectAll(".punto")
			.data(data)
			.enter().append("circle")
			.attr("class", "punto")
			.attr("r",r)
			.attr("cx", function(d){ return x(d["followers"])})
			.attr("cy", function(d){ return y(d["following"])});

});

</script>

